<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gestor de M√∫sicas com Playlists</title>
<style>
/* --- Styles b√°sicos existentes --- */
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent;}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Arial,sans-serif;background:linear-gradient(135deg,#e0c3fc 0%,#8ec5fc 100%);min-height:100vh;overflow-x:hidden;padding-bottom:60px;}
.header{background:#6b46c1;color:white;padding:20px;text-align:center;box-shadow:0 2px 10px rgba(0,0,0,0.1);position:sticky;top:0;z-index:100;}
.header h1{font-size:24px;margin-bottom:8px;}
.header .count{font-size:14px;opacity:0.9;}
.container{padding:10px;}
.card{background:white;border-radius:12px;padding:15px;margin:10px 0;box-shadow:0 2px 8px rgba(0,0,0,0.1);}
.song-list{max-height:50vh;overflow-y:auto;margin-top:10px;}
.song-item{display:flex;align-items:center;gap:12px;padding:12px;background:#f9fafb;border-radius:8px;margin-bottom:8px;cursor:pointer;}
.song-item.selected{background:#e0e7ff;border:2px solid #6b46c1;}
.song-index{min-width:40px;height:40px;background:#6b46c1;color:white;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:bold;flex-shrink:0;}
.song-title{flex:1;word-break:break-word;}
button{padding:10px;border:none;border-radius:8px;cursor:pointer;}
.btn-primary{background:#6b46c1;color:white;}
.btn-secondary{background:#8b5cf6;color:white;}
.btn-edit{background:#3b82f6;color:white;padding:6px 10px;font-size:12px;}
.btn-delete{background:#ef4444;color:white;padding:6px 10px;font-size:12px;}
.tabs{display:flex;gap:2px;margin-bottom:10px;}
.tab{flex:1;text-align:center;padding:10px;background:#ddd;cursor:pointer;border-radius:8px 8px 0 0;}
.tab.active{background:#6b46c1;color:white;}
.tab-content{display:none;}
.tab-content.active{display:block;}
.playlist-item{background:#f0f4ff;padding:8px;border-radius:6px;margin-bottom:6px;display:flex;justify-content:space-between;align-items:center;}
.input-group{display:flex;gap:8px;margin-bottom:10px;}
input[type=text]{flex:1;padding:8px;border-radius:6px;border:1px solid #ccc;}
</style>
</head>
<body>
<div class="header">
    <h1>üéµ Gestor de M√∫sicas</h1>
    <div class="count" id="songCount">Total: 0 m√∫sicas</div>
</div>

<div class="container">
    <div class="tabs">
        <div class="tab active" onclick="showTab('main')">Lista Principal</div>
        <div class="tab" onclick="showTab('playlists')">Playlists</div>
    </div>

    <!-- Aba Lista Principal -->
    <div class="tab-content active" id="main">
        <div class="card">
            <h2>Adicionar M√∫sica</h2>
            <div class="input-group">
                <input type="text" id="newSongTitle" placeholder="T√≠tulo da m√∫sica...">
                <button class="btn-primary" onclick="addSong()">‚ûï Adicionar</button>
            </div>
        </div>
        <div class="card">
            <h2>Cole√ß√£o</h2>
            <div class="song-list" id="songList"></div>
        </div>
    </div>

    <!-- Aba Playlists -->
    <div class="tab-content" id="playlists">
        <div class="card">
            <h2>Criar Playlist</h2>
            <div class="input-group">
                <input type="text" id="newPlaylistName" placeholder="Nome da playlist...">
                <button class="btn-primary" onclick="createPlaylist()">‚ûï Criar</button>
            </div>
        </div>
        <div class="card">
            <h2>Playlists Existentes</h2>
            <div id="playlistList"></div>
        </div>
        <div class="card">
            <h2>M√∫sicas na Playlist Selecionada</h2>
            <div class="song-list" id="playlistSongs"></div>
        </div>
    </div>
</div>

<script>
// --- Dados ---
let songs = [];
let playlists = {}; // {playlistName: [songIds]}
let selectedPlaylist = null;

// --- Tabs ---
function showTab(id){
    document.querySelectorAll('.tab-content').forEach(t=>t.classList.remove('active'));
    document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    document.querySelector(`.tab[onclick*="${id}"]`).classList.add('active');
}

// --- Lista Principal ---
function loadSongs(){
    const saved = localStorage.getItem('musicCollection');
    if(saved) songs=JSON.parse(saved);
    renderSongs();
    renderPlaylists();
}

function saveSongs(){
    localStorage.setItem('musicCollection',JSON.stringify(songs));
}

function addSong(){
    const title = document.getElementById('newSongTitle').value.trim();
    if(!title) return alert('Insira um t√≠tulo!');
    songs.push({id:Date.now()+Math.random(), title});
    saveSongs();
    document.getElementById('newSongTitle').value='';
    renderSongs();
}

function renderSongs(){
    const listEl = document.getElementById('songList');
    listEl.innerHTML = songs.map((s,i)=>`
        <div class="song-item" onclick="selectSong(${i})">
            <div class="song-index">${i+1}</div>
            <div class="song-title">${s.title}</div>
        </div>`).join('');
    document.getElementById('songCount').textContent = `Total: ${songs.length} m√∫sicas`;
}

function selectSong(index){
    const song = songs[index];
    if(selectedPlaylist){
        // Adiciona √† playlist
        const pl = playlists[selectedPlaylist];
        if(!pl.includes(song.id)){
            pl.push(song.id);
            renderPlaylistSongs();
        } else alert('M√∫sica j√° existe na playlist!');
    }
}

// --- Playlists ---
function createPlaylist(){
    const name = document.getElementById('newPlaylistName').value.trim();
    if(!name) return alert('Nome inv√°lido');
    if(playlists[name]) return alert('J√° existe');
    playlists[name]=[];
    selectedPlaylist = name;
    document.getElementById('newPlaylistName').value='';
    renderPlaylists();
    renderPlaylistSongs();
}

function renderPlaylists(){
    const listEl = document.getElementById('playlistList');
    listEl.innerHTML = Object.keys(playlists).map(pl=>`
        <div class="playlist-item">
            <span onclick="selectPlaylist('${pl}')">${pl}</span>
            <button onclick="deletePlaylist('${pl}')">‚ùå</button>
        </div>
    `).join('');
}

function selectPlaylist(name){
    selectedPlaylist = name;
    renderPlaylistSongs();
}

function deletePlaylist(name){
    if(confirm(`Remover playlist ${name}?`)){
        delete playlists[name];
        if(selectedPlaylist===name) selectedPlaylist=null;
        renderPlaylists();
        renderPlaylistSongs();
    }
}

function renderPlaylistSongs(){
    const listEl = document.getElementById('playlistSongs');
    if(!selectedPlaylist){ listEl.innerHTML='<i>Selecione uma playlist</i>'; return; }
    const ids = playlists[selectedPlaylist];
    listEl.innerHTML = ids.map((id,i)=>{
        const song = songs.find(s=>s.id===id);
        if(!song) return '';
        return `<div class="song-item">
            <div class="song-index">${i+1}</div>
            <div class="song-title">${song.title}</div>
        </div>`;
    }).join('');
}

// --- Inicializa√ß√£o ---
loadSongs();
</script>
</body>
</html>
